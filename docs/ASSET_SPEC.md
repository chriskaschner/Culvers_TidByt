# Custard Calendar — Visual Asset Specification

Canonical reference for all visual assets across the platform. This is the source of truth the flavor asset parity audit (Later) will reference. Update this file before generating or publishing any new asset class.

---

## Asset Catalog

### 1. Open Graph / Social Cards

Used by: all 9 docs pages, trivia shares, quiz result shares.

| Asset | Format | Resolution | Color Space | Notes |
|---|---|---|---|---|
| Page OG card (`/og/page/{slug}.svg`) | SVG | 1200x630px | sRGB | Worker-generated, 24h cache. 9 slugs. |
| Trivia OG card (`/og/trivia/{slug}.svg`) | SVG | 1200x630px | sRGB | Worker-generated, 4 slugs. |
| Quiz result share image | SVG (future: PNG fallback) | 1200x630px | sRGB | Currently uses page OG; ideally archetype-specific |
| Email header image | PNG | 600x200px | sRGB | Must be hosted (no CID); SVG not safe in email clients |

**Why PNG fallback matters:** iMessage, Slack, and some Discord unfurls do not render SVG OG images. For maximum compatibility, the Worker should serve a rasterized PNG at `/og/page/{slug}.png` (same SVG, rasterized via Resvg or equivalent at deploy time, or via a Cloudflare Image Transform).

---

### 2. Cone Renders (SVG, inline)

All four tiers share: `shape-rendering="crispEdges"`, waffle cone colors `#D2691E`/`#B8860B`, tip `#8B5A2B`. Color space: sRGB.

| Tier | Grid | Canonical scale | Output px | Used by |
|---|---|---|---|---|
| **Mini** | 9x11 | x5 | 45x55px | Tidbyt star file, map markers |
| **HD** | 18x21 | x5 | 90x105px | Radar day cards |
| **HD** | 18x21 | x8 | 144x168px | Hero/OG card cone inset |
| **Hero** | 36x42 | x4 | 144x168px | OG cards (1200x630 inset), large hero blocks |
| **Premium** | 24x28 | x6 | 144x168px | Flavor audit page; intended for per-flavor static assets |

**Notes:**
- All SVGs are inline-generated by Worker (`flavor-colors.js`) or browser (`cone-renderer.js`). No static file per flavor.
- For email use, cones must be rasterized PNG — SVG is unsupported in major email clients (Gmail, Outlook).
- Recommended raster export: Hero tier at x8 = 288x336px PNG, sRGB, for email inline use.

---

### 3. Tidbyt Device Assets

Constraint: **64x32 pixels exactly**. Pixlet renders `.webp` for device push.

| Asset | Format | Resolution | Color Space | Notes |
|---|---|---|---|---|
| Tidbyt push frame | WebP | 64x32px | sRGB (limited palette) | Produced by `pixlet render` then `pixlet push` |
| Tidbyt preview (web display) | WebP | 320x160px | sRGB | 5x upscale of device output for widget.html preview |
| In-app preview image | PNG | 640x320px | sRGB | 10x upscale, for docs screenshots |

---

### 4. Map Markers

Currently rendered inline via `cone-renderer.js` as SVG Leaflet divIcon.

| Asset | Format | Base size | Color Space | Notes |
|---|---|---|---|---|
| Mini cone map marker | SVG (inline) | 28x32px | sRGB | Scaled 2x for HiDPI via CSS. Flavor-colored scoop. |
| Cluster marker | SVG (inline) | 32x32px | sRGB | Count badge + muted cone; rendered by Leaflet |

---

### 5. Favicon / App Icon Set

Currently: not audited. Should exist at `docs/`.

| Asset | Format | Resolution | Color Space | Notes |
|---|---|---|---|---|
| Favicon (multi-size) | ICO or SVG | 16x16, 32x32, 48x48 | sRGB | SVG preferred (modern browsers); ICO as fallback |
| Apple touch icon | PNG | 180x180px | sRGB | Solid background required (no transparency) |
| Android PWA icon | PNG | 192x192px | sRGB | For web app manifest |
| Android PWA icon (maskable) | PNG | 512x512px | sRGB | Safe zone = inner 80% |
| Safari pinned tab | SVG (monochrome) | any | — | Single-color path only |

---

### 6. Email-Safe Images

Email clients: Gmail, Apple Mail, Outlook (strips SVG). All must be hosted at a stable URL.

| Asset | Format | Max width | Color Space | Notes |
|---|---|---|---|---|
| Alert email flavor cone | PNG | 120x140px | sRGB | Hero tier x3 rasterized |
| Weekly digest section cone | PNG | 80x94px | sRGB | HD tier x4 rasterized |
| Email header / banner | PNG | 600x120px | sRGB | Brand color `#005696` bg, wordmark or name |

---

### 7. Widget Setup Screenshots (docs/widget.html)

For the Scriptable widget setup guide.

| Asset | Format | Resolution | Color Space | Notes |
|---|---|---|---|---|
| Small widget preview | PNG | 310x310px (2x = 620x620) | sRGB | Dark bg, brand header, cone, rarity badge |
| Medium (3-day) widget preview | PNG | 657x310px (2x = 1314x620) | sRGB | 3 flavor rows |
| Medium (3-store) widget preview | PNG | 657x310px (2x = 1314x620) | sRGB | 3 store rows (multi-store layout) |
| Scriptable app store badge | PNG | 120x40px | sRGB | Per Apple badge guidelines |

---

### General Color Space Rules

- **All web assets (SVG, PNG for web):** sRGB (IEC 61966-2-1). Do not embed Display P3 or AdobeRGB profiles — they render with color shifts in non-color-managed browsers.
- **All rasters:** 8-bit per channel (24-bit RGB or 32-bit RGBA). No 16-bit output needed.
- **Transparency:** PNG with alpha for all assets on variable backgrounds (map markers, cones on email). No GIF (poor transparency support).
- **Brand blue:** `#005696` — sRGB hex. Do NOT convert to CMYK or LAB for screen output.
- **Cone colors:** `#D2691E`, `#B8860B`, `#8B5A2B` — already in sRGB hex. No gamut conversion needed.

---

## Culver's Flavor Reference URLs

Culver's flavor pages follow the pattern:
`https://www.culvers.com/flavor-of-the-day/[slug]`

| Flavor Name | URL Slug |
|---|---|
| Andes Mint Avalanche | `andes-mint-avalanche` |
| Blackberry Cobbler | `blackberry-cobbler` |
| Brownie Thunder | `brownie-thunder` |
| Butter Pecan | `butter-pecan` |
| Caramel Cashew | `caramel-cashew` |
| Caramel Chocolate Pecan | `caramel-chocolate-pecan` |
| Caramel Fudge Cookie Dough | `caramel-fudge-cookie-dough` |
| Caramel Pecan | `caramel-pecan` |
| Caramel Peanut Buttercup | `caramel-peanut-buttercup` |
| Caramel Turtle | `caramel-turtle` |
| Chocolate Caramel Twist | `chocolate-caramel-twist` |
| Chocolate Covered Strawberry | `chocolate-covered-strawberry` |
| Chocolate Heath Crunch | `chocolate-heath-crunch` |
| Chocolate Oreo Volcano | `chocolate-oreo-volcano` |
| Chocolate Volcano | `chocolate-volcano` |
| Crazy for Cookie Dough | `crazy-for-cookie-dough` |
| Dark Chocolate Decadence | `dark-chocolate-decadence` |
| Dark Chocolate PB Crunch | `dark-chocolate-pb-crunch` |
| Devil's Food Cake | `devils-food-cake` |
| Double Butter Pecan | `double-butter-pecan` |
| Double Strawberry | `double-strawberry` |
| Georgia Peach | `georgia-peach` |
| Lemon Berry Layer Cake | `lemon-berry-layer-cake` |
| Lemon Dash Cookie | `lemon-dash-cookie` |
| Mint Cookie | `mint-cookie` |
| Mint Explosion | `mint-explosion` |
| OREO Cheesecake | `oreo-cheesecake` |
| OREO Cookie Cheesecake | `oreo-cookie-cheesecake` |
| Peanut Butter Cup | `peanut-butter-cup` |
| Raspberry Cheesecake | `raspberry-cheesecake` |
| Really Reese's | `really-reeses` |
| Salted Caramel Pecan Pie | `salted-caramel-pecan-pie` |
| Salted Double Caramel Pecan | `salted-double-caramel-pecan` |
| Snickers Swirl | `snickers-swirl` |
| Strawberry Cheesecake | `strawberry-cheesecake` |
| Turtle | `turtle` |
| Turtle Cheesecake | `turtle-cheesecake` |
| Turtle Dove | `turtle-dove` |
| Vanilla | `vanilla` |

> Note: Slugs are inferred from flavor names and should be verified against the live Culver's website before use. Some historical flavors (Chocolate Oreo Volcano, Peanut Butter Cup, Salted Caramel Pecan Pie) may no longer have active pages.

---

## Flavor Profiles

All flavors with base color, toppings, ribbon, and density. Used across all rendering contexts.

### Color Palette

**Base colors** (scoop fill):

| Key | Hex | Description |
|---|---|---|
| `vanilla` | `#F5DEB3` | Wheat/cream |
| `chocolate` | `#6F4E37` | Medium brown |
| `chocolate_custard` | `#5A3825` | Dark brown |
| `dark_chocolate` | `#3B1F0B` | Very dark brown |
| `mint` | `#2ECC71` | Bright green |
| `mint_andes` | `#1A8A4A` | Dark green |
| `strawberry` | `#FF6B9D` | Pink |
| `cheesecake` | `#FFF5E1` | Off-white/ivory |
| `caramel` | `#C68E17` | Golden brown |
| `butter_pecan` | `#F2E7D1` | Light tan |
| `peach` | `#FFE5B4` | Pale orange |
| `lemon` | `#FFF176` | Pale yellow |
| `blackberry` | `#6B3FA0` | Purple |

**Ribbon colors** (swirl overlay):

| Key | Hex | Description |
|---|---|---|
| `caramel` | `#D38B2C` | Amber caramel |
| `peanut_butter` | `#D4A017` | Golden peanut butter |
| `marshmallow` | `#FFFFFF` | White |
| `chocolate_syrup` | `#1A0A00` | Near-black chocolate |
| `fudge` | `#3B1F0B` | Dark chocolate fudge |

**Topping colors** (scattered pieces):

| Key | Hex | Description | Shape |
|---|---|---|---|
| `oreo` | `#1A1A1A` | Near-black | dot |
| `andes` | `#1FAE7A` | Teal green | dot |
| `dove` | `#2B1A12` | Dark chocolate | dot |
| `pecan` | `#8B5A2B` | Tan brown | chunk |
| `cashew` | `#D4C4A8` | Light tan | chunk |
| `heath` | `#DAA520` | Gold | sliver |
| `butterfinger` | `#E6A817` | Orange-gold | dot |
| `cookie_dough` | `#C4A882` | Tan | dot |
| `strawberry_bits` | `#FF1744` | Bright red | dot |
| `raspberry` | `#E91E63` | Hot pink | dot |
| `peach_bits` | `#FF9800` | Orange | dot |
| `salt` | `#FFFFFF` | White | dot |
| `snickers` | `#C4A060` | Tan | dot |
| `cake` | `#4A2800` | Dark brown | chunk |
| `cheesecake_bits` | `#FFF8DC` | Cream | dot |
| `m_and_m` | `#FF4444` | Red | dot |
| `reeses` | `#D4A017` | Gold | dot |
| `brownie` | `#2D1700` | Very dark brown | chunk |
| `blueberry` | `#3B1F6B` | Dark purple | dot |
| `pie_crust` | `#C4966A` | Light brown | chunk |

**Cone colors:**

| Key | Hex |
|---|---|
| `waffle` | `#D2691E` |
| `waffle_dark` | `#B8860B` |
| `cone_tip` | `#8B5A2B` |

> Note: `cone_tip` (`#8B5A2B`) is identical to `pecan`. Skip `cone_tip` in color-exclusion tests.

### Density System

| Density | Behavior |
|---|---|
| `pure` | No toppings, no ribbon |
| `standard` | Toppings as listed, ribbon if present |
| `double` | Primary topping doubled, secondary once |
| `explosion` | Every topping doubled |
| `overload` | Single topping x6, very heavy |

### Full Flavor Table

| Flavor | Base | Ribbon | Toppings | Density |
|---|---|---|---|---|
| Andes Mint Avalanche | mint_andes | — | andes, andes, dove | standard |
| Blackberry Cobbler | blackberry | — | pie_crust x3 | standard |
| Brownie Thunder | chocolate | marshmallow | brownie, dove, brownie | explosion |
| Butter Pecan | butter_pecan | — | pecan | standard |
| Caramel Cashew | vanilla | caramel | cashew | standard |
| Caramel Chocolate Pecan | chocolate_custard | caramel | pecan, pecan, dove, pecan | explosion |
| Caramel Fudge Cookie Dough | vanilla | fudge | cookie_dough | standard |
| Caramel Pecan | caramel | — | pecan | standard |
| Caramel Peanut Buttercup | vanilla | peanut_butter | dove | standard |
| Caramel Turtle | caramel | fudge | pecan, dove, pecan | explosion |
| Chocolate Caramel Twist | chocolate | caramel | dove | standard |
| Chocolate Covered Strawberry | vanilla | — | strawberry_bits, dove | standard |
| Chocolate Heath Crunch | chocolate | — | heath | standard |
| Chocolate Oreo Volcano | chocolate | marshmallow | oreo, dove | explosion |
| Chocolate Volcano | chocolate | chocolate_syrup | oreo, dove, m_and_m | explosion |
| Crazy for Cookie Dough | vanilla | fudge | cookie_dough | standard |
| Dark Chocolate Decadence | dark_chocolate | — | — | pure |
| Dark Chocolate PB Crunch | dark_chocolate | peanut_butter | butterfinger | standard |
| Devil's Food Cake | chocolate_custard | — | cake, dove | standard |
| Double Butter Pecan | vanilla | — | pecan | double |
| Double Strawberry | strawberry | — | strawberry_bits | double |
| Georgia Peach | peach | — | peach_bits | standard |
| Lemon Berry Layer Cake | lemon | — | blueberry, cake | standard |
| Lemon Dash Cookie | lemon | — | oreo | standard |
| Mint Cookie | mint | — | oreo | double |
| Mint Explosion | mint | — | oreo, andes, dove | explosion |
| OREO Cheesecake | cheesecake | — | oreo | double |
| OREO Cookie Cheesecake | cheesecake | — | oreo | double |
| Peanut Butter Cup | chocolate | peanut_butter | reeses | standard |
| Raspberry Cheesecake | cheesecake | — | raspberry | double |
| Really Reese's | chocolate | peanut_butter | reeses | standard |
| Salted Caramel Pecan Pie | caramel | — | pecan, salt, pie_crust | explosion |
| Salted Double Caramel Pecan | vanilla | caramel | pecan, salt | double |
| Snickers Swirl | chocolate | caramel | snickers | standard |
| Strawberry Cheesecake | cheesecake | — | strawberry_bits | double |
| Turtle | vanilla | caramel | pecan, dove | standard |
| Turtle Cheesecake | cheesecake | caramel | pecan, dove, pecan | explosion |
| Turtle Dove | vanilla | marshmallow | pecan, dove | standard |
| Vanilla | vanilla | — | — | pure |

---

## Tidbyt Display — Hard Constraints

The Tidbyt LED matrix is **64x32 pixels**. This is a strict physical constraint.

- Total canvas: 64px wide x 32px tall
- Font: `tom-thumb` — approximately 4px wide per character, 6px tall
- Header bar: 6px tall (5px brand color + 1px gap)
- Content area: 26px tall (remaining after header)
- Three-day view: 3 mini cones side by side using `space_evenly`
- Flavor label: <=6 characters per column for 3-column layout
- Brand color bar: 5px tall strip at top in brand primary color

### Mini Cone Geometry (9x11 grid)

```
Grid: 9 wide x 11 tall
Scoop: rows 0-4
  Row 0: cols 3-5  (3px crown)
  Row 1: cols 2-6  (5px)
  Row 2: cols 1-7  (7px full)
  Row 3: cols 1-7  (7px full)
  Row 4: cols 1-7  (7px full)
Cone: rows 5-9 (checkerboard)
  Row 5: cols 2-6
  Row 6: cols 2-6
  Row 7: cols 3-5
  Row 8: cols 3-5
  Row 9: col 4 (1px tip)

Fixed topping slots (max 4):
  T1: (2,1)  T2: (6,1)  T3: (3,3)  T4: (5,2)

Fixed ribbon slots (3 pixels, diagonal):
  R1: (3,0)  R2: (4,1)  R3: (5,2)
```

**Color note for Tidbyt LED display:** Very dark colors (dark_chocolate, chocolate_syrup, dove) may appear identical. Bump dark values by ~20% for LED legibility.

---

## Cone Render Geometry Reference

### HD Cone (18x21 grid)

- Scale 5: 90x105px (Radar day cards)
- Scale 8: 144x168px (Hero/OG card inset)
- Specular highlight: `lightenHex(base, 0.30)` at upper-left 2 pixels
- 8 fixed 2D topping slots; S-curve ribbon

### Hero Cone (36x42 grid)

- Scale 4: 144x168px (audit page)
- Scale 8: 288x336px (OG social cards)
- Highlight: `lightenHex(base, 0.25)` at pixels (8,0),(9,0),(6,1),(7,1)
- Shadow: `darkenHex(base, 0.12)` at pixels (29,19),(28,20),(27,21)
- Ribbon: 9 points at (14,2),(15,4),(16,6),(17,8),(18,10),(17,12),(16,14),(15,16),(16,18) each 2x1px
- Topping slots: (10,1),(22,3),(8,7),(26,8),(10,12),(24,13),(8,17),(23,18)

### Premium Cone (24x28 grid) — target for external replacement

- Scale 6: 144x168px
- Current implementation: flat-wide dome, sparse toppings
- Target: round dome, dense scattered toppings (~15-20 pieces), diagonal ribbon, ±30% color variation per pixel

---

## OG Social Card Layout

- Canvas: 1200x630px SVG
- Cone: HD at scale 6 (108x132px), approx (70, 160)
- Flavor name: 64px bold white
- Store name: 36px gray
- Date: 32px, tinted to base color
- Metrics: 28px muted
- Accent bar: 8px top border, tinted to base at reduced opacity
- Background: dark (#0e1117)
- Route: `GET /og/page/{slug}.svg`

---

## Priority Order for Asset Generation

**Tier 1 — Appear regularly, high visibility:**
Vanilla, Chocolate, Caramel Chocolate Pecan, Mint Explosion, Turtle, Butter Pecan, Caramel Cashew, Really Reese's, Snickers Swirl, Blackberry Cobbler

**Tier 2 — Seasonal / rotational:**
Andes Mint Avalanche, Brownie Thunder, Caramel Turtle, Chocolate Volcano, Crazy for Cookie Dough, Dark Chocolate Decadence, Double Butter Pecan, Lemon Berry Layer Cake, Mint Cookie, OREO Cookie Cheesecake, Raspberry Cheesecake, Salted Double Caramel Pecan, Strawberry Cheesecake, Turtle Cheesecake, Turtle Dove

**Tier 3 — Less frequent / historical:**
Caramel Fudge Cookie Dough, Caramel Peanut Buttercup, Chocolate Caramel Twist, Chocolate Covered Strawberry, Chocolate Heath Crunch, Dark Chocolate PB Crunch, Devil's Food Cake, Double Strawberry, Georgia Peach, Lemon Dash Cookie, OREO Cheesecake, Peanut Butter Cup (historical), Salted Caramel Pecan Pie (historical), Chocolate Oreo Volcano (historical)
